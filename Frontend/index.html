<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pharmly â€“ Smart Pharmacy</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">

</head>
<body>

<!-- ============================================================
     NAVBAR
============================================================ -->
<nav class="navbar" role="navigation" aria-label="Main Navigation">
  <div class="nav-inner">
    <div class="nav-logo" onclick="goTo('home')" role="button" tabindex="0" aria-label="Pharmly Home">
      <div class="nav-logo-icon">âš•</div>
      Pharmly
    </div>

    <ul class="nav-links" role="list">
      <li><a onclick="goTo('home')" id="nav-home" class="active" role="button" tabindex="0" aria-current="page">Home</a></li>
      <li><a onclick="goTo('about')" id="nav-about" role="button" tabindex="0">About</a></li>
      <li><a onclick="goTo('dashboard')" id="nav-dashboard" role="button" tabindex="0">User Dashboard</a></li>
      <li><a onclick="goTo('admin')" id="nav-admin" role="button" tabindex="0">Admin Panel</a></li>
      <li><a onclick="goTo('safety')" id="nav-safety" role="button" tabindex="0">ğŸ›¡ï¸ Safety & Security</a></li>
    </ul>

    <div class="nav-actions">
      <div class="notif-wrap">
        <button class="nav-icon-btn" onclick="toggleNotif()" aria-label="Notifications" aria-haspopup="true">
          ğŸ””<span class="badge-dot" id="notifDot">3</span>
        </button>
        <div class="notif-drop" id="notifDrop" role="menu">
          <div class="notif-head"><span>Notifications</span><button onclick="clearNotifs()" style="background:none;color:var(--b2);font-size:.78rem;font-weight:700">Clear all</button></div>
          <div id="notifList"></div>
        </div>
      </div>
      <button class="btn-safety" aria-label="Safety & Compliance">ğŸ›¡ï¸ <span>Safety</span></button>
      <button class="nav-icon-btn" aria-label="Cart (3 items)">ğŸ›’<span class="badge-dot">3</span></button>
      <div id="userGreeting" style="font-weight:600;margin-right:10px;"></div>
<button class="btn-login" id="authBtn" aria-label="Authentication Button">Login</button>
    </div>
  </div>
</nav>

<!-- ============================================================
     HOME PAGE
============================================================ -->
<div id="page-home" class="page active">
  <div class="hero-bg">
    <div class="blob blob1"></div>
    <div class="blob blob2"></div>
  </div>
  <div class="grid-bg"></div>

  <section class="hero" aria-label="Hero">
    <div class="hero-content">
      <div class="hero-badge"><span class="dot dot-green"></span>AI System Operational Â· Compliance Engine Active</div>
      <h1 class="hero-title">The Future of<br><span class="hero-title-grad">Smart Pharmacy</span><br>is Here</h1>
      <p class="hero-sub">AI-powered medication ordering, real-time inventory management, and prescription verification â€” all in one intelligent platform built for healthcare professionals.</p>
      <div class="hero-btns">
        <button class="btn-primary" onclick="goTo('dashboard')" aria-label="Get Started">ğŸš€ Get Started</button>
        <button class="btn-secondary" aria-label="Watch Demo">â–¶ Watch Demo</button>
      </div>
      <div class="search-hero">
        <div class="search-box">
          <span class="search-icon">ğŸ”</span>
          <input type="search" class="search-input" id="heroSearch" placeholder="Search medicine by name, category..." aria-label="Search medicine" autocomplete="off">
          <button class="search-btn" onclick="doSearch()" aria-label="Search">Search</button>
        </div>
        <div class="search-drop" id="searchDrop" role="listbox"></div>
        <div class="search-tags">
          <span class="stag" onclick="fillSearch('Paracetamol')">ğŸ’Š Paracetamol</span>
          <span class="stag" onclick="fillSearch('Ibuprofen')">ğŸ§´ Ibuprofen</span>
          <span class="stag" onclick="fillSearch('Amoxicillin')">ğŸ’‰ Amoxicillin</span>
          <span class="stag" onclick="fillSearch('Cetirizine')">ğŸ©º Cetirizine</span>
        </div>
      </div>
    </div>

    <div class="hero-visual" aria-hidden="true">
      <div class="hero-orb">
        <div class="ring ring1"></div>
        <div class="ring ring2"></div>
        <div class="ring ring3"></div>
        <div class="orb-core">
          <span class="orb-emoji">ğŸ’Š</span>
          <span class="orb-label">AI Rx</span>
        </div>
        <div class="fpill fp1">Paracetamol âœ“</div>
        <div class="fpill fp2">Stock: 32 ğŸŸ¢</div>
        <div class="fpill fp3">Order #1023 âœ…</div>
      </div>
    </div>
  </section>

  <div class="stats-strip">
    <div class="stats-inner">
      <div class="stat-item"><span class="stat-num">98.7%</span><span class="stat-lbl">Prescription Accuracy</span></div>
      <div class="stat-div"></div>
      <div class="stat-item"><span class="stat-num">1,200+</span><span class="stat-lbl">Medicines in Stock</span></div>
      <div class="stat-div"></div>
      <div class="stat-item"><span class="stat-num">5,000+</span><span class="stat-lbl">Orders Processed</span></div>
      <div class="stat-div"></div>
      <div class="stat-item"><span class="stat-num">24/7</span><span class="stat-lbl">AI Assistance</span></div>
    </div>
  </div>

  <section class="features" aria-labelledby="feat-title">
    <div class="section-wrap">
      <div class="feat-header">
        <h2 id="feat-title">Everything You Need in One Platform</h2>
        <p>Powerful tools for modern pharmacy management, driven by AI</p>
      </div>
      <div class="feat-grid">
        <div class="feat-card" onclick="goTo('dashboard')" tabindex="0" role="button">
          <span class="feat-icon">ğŸ¤–</span>
          <h3>AI Medication Assistant</h3>
          <p>Chat or voice-based ordering with full prescription validation, compliance checks, and intelligent drug interaction alerts.</p>
          <span class="feat-link">Try Now â†’</span>
        </div>
        <div class="feat-card featured" onclick="goTo('admin')" tabindex="0" role="button">
          <span class="feat-icon">ğŸ“Š</span>
          <h3>Admin Dashboard</h3>
          <p>Real-time stock tracking, revenue analytics, top sellers, low stock alerts, and full order management in beautiful charts.</p>
          <span class="feat-link">Open Admin Panel â†’</span>
        </div>
        <div class="feat-card" onclick="goTo('dashboard')" tabindex="0" role="button">
          <span class="feat-icon">ğŸ“„</span>
          <h3>Prescription Verification</h3>
          <p>Automated prescription upload and verification. No restricted medicines without valid prescriptions â€” ever.</p>
          <span class="feat-link">Learn More â†’</span>
        </div>
        <div class="feat-card" tabindex="0" role="button">
          <span class="feat-icon">ğŸ””</span>
          <h3>Smart Notifications</h3>
          <p>Real-time alerts for low stock, new offers, refill arrivals, and order updates â€” pushed directly to your panel.</p>
          <span class="feat-link">See Alerts â†’</span>
        </div>
        <div class="feat-card" onclick="goTo('admin')" tabindex="0" role="button">
          <span class="feat-icon">ğŸ‘¥</span>
          <h3>Customer Management</h3>
          <p>Full customer profiles, order histories, prescription records, and the ability to add new patients with ease.</p>
          <span class="feat-link">Manage â†’</span>
        </div>
        <div class="feat-card" onclick="goTo('dashboard')" tabindex="0" role="button">
          <span class="feat-icon">ğŸ™ï¸</span>
          <h3>Voice AI Agent</h3>
          <p>Hands-free medication ordering through the Vapi-powered voice assistant. Just speak and the AI handles the rest.</p>
          <span class="feat-link">Try Voice â†’</span>
        </div>
      </div>
    </div>
  </section>

  <section class="cta-sec" aria-labelledby="cta-title">
    <div class="cta-inner">
      <div>
        <h2 id="cta-title">Ready to Transform Your Pharmacy?</h2>
        <p>Join hundreds of pharmacies already using Pharmly to streamline operations, reduce errors, and serve patients better.</p>
        <button class="btn-primary" onclick="goTo('dashboard')">ğŸš€ Get Started Free</button>
      </div>
      <div class="cta-card">
        <div class="cta-stat"><span>ğŸ“¦</span><div><strong>1,023</strong><small>Orders Today</small></div></div>
        <div class="cta-stat"><span>ğŸ’°</span><div><strong>$48,200</strong><small>Revenue This Month</small></div></div>
        <div class="cta-stat"><span>ğŸŸ¢</span><div><strong>Online</strong><small>System Status</small></div></div>
        <div class="cta-stat"><span>ğŸ›¡ï¸</span><div><strong>12 Blocked</strong><small>Rx Violations Today</small></div></div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-inner">
      <div class="nav-logo" style="color:white"><div class="nav-logo-icon">âš•</div>Pharmly</div>
      <nav class="footer-links">
        <a onclick="goTo('home')">Home</a>
        <a onclick="goTo('about')">About</a>
        <a onclick="goTo('dashboard')">User Dashboard</a>
        <a onclick="goTo('admin')">Admin Panel</a>
        <a onclick="goTo('safety')">Safety & Security</a>
      </nav>
      <div class="footer-meta"><span class="dot dot-green"></span>All Systems Operational<span style="margin-left:1rem">Â© 2024 Pharmly</span></div>
    </div>
  </footer>
</div>

<!-- ============================================================
     ABOUT PAGE
============================================================ -->
<div id="page-about" class="page">
  <div class="about-hero">
    <div class="hero-badge" style="background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.3);color:white;margin-bottom:1.25rem;display:inline-flex"><span class="dot dot-green"></span>Trusted by 500+ Pharmacies Worldwide</div>
    <h1>About Pharmly</h1>
    <p>We're building the future of intelligent, compliant, and human-centered pharmacy management â€” powered by artificial intelligence and driven by an unwavering commitment to patient safety.</p>
  </div>

  <div class="about-grid">
    <div class="about-text">
      <h2>Our Story</h2>
      <p>Pharmly was born from a simple observation: pharmacy management in the modern world was still stuck in outdated systems â€” paper prescriptions, manual inventory tracking, and zero real-time insights. We saw an opportunity to change that fundamentally.</p>
      <p>Founded by a team of healthcare technologists, AI researchers, and pharmacists, Pharmly set out to build a platform that doesn't just digitize existing workflows â€” it reimagines them entirely. We asked ourselves: what would pharmacy management look like if it were designed from the ground up today, with everything we know about AI, cloud computing, and user experience?</p>
      <p>The result is a platform that brings together natural language AI (so pharmacists and patients can just talk to it), real-time inventory intelligence, prescription compliance enforcement, and a beautiful dashboard that makes complex data feel simple and actionable.</p>
      <p>Today, we serve hundreds of pharmacies across the country, processing thousands of orders daily, catching prescription violations before they happen, and helping pharmacy teams work smarter â€” not harder. Our AI assistant handles medication inquiries, flags drug interactions, verifies prescriptions, and even manages reorder alerts automatically.</p>
      <p>But what we're most proud of isn't the technology. It's the patient safety outcomes. Every prescription block, every low-stock alert, every dosage warning caught by our compliance engine represents a real person being protected. That's why we built this. That's why we wake up every morning and keep building it.</p>
      <p>We believe that the pharmacy of the future is one where healthcare professionals spend more time on what matters â€” the human side of care â€” and less time wrestling with spreadsheets, paper forms, and outdated software. Pharmly is that future, available today.</p>
      <p>Whether you're a solo pharmacist running a single store, or a healthcare network managing dozens of locations, our platform scales with you. Our compliance engine automatically adapts to regulations, our AI model learns from your inventory patterns, and our support team is always available when you need a human touch.</p>
      <p>Join us in building a healthier world â€” one prescription at a time.</p>
    </div>

    <div>
      <div class="astat-card">
        <div class="astat"><span class="astat-num">500+</span><span class="astat-lbl">Pharmacies Served</span></div>
        <div class="astat"><span class="astat-num">2M+</span><span class="astat-lbl">Prescriptions Verified</span></div>
        <div class="astat"><span class="astat-num">99.9%</span><span class="astat-lbl">Uptime SLA</span></div>
        <div class="astat"><span class="astat-num">24/7</span><span class="astat-lbl">AI Support</span></div>
      </div>

      <div class="aval-card">
        <h3>Our Core Values</h3>
        <ul class="aval-list">
          <li><span>ğŸ›¡ï¸</span><div><strong>Safety First</strong><p>Every decision we make is filtered through the lens of patient safety and compliance.</p></div></li>
          <li><span>ğŸ¤–</span><div><strong>AI with Empathy</strong><p>Our AI doesn't replace human care â€” it enhances it by handling the tedious so people can focus on the meaningful.</p></div></li>
          <li><span>ğŸŒ</span><div><strong>Accessibility</strong><p>Designed for every user, regardless of technical ability or disability.</p></div></li>
          <li><span>ğŸ”’</span><div><strong>Data Privacy</strong><p>Patient data is sacred. We maintain the highest standards of encryption and compliance.</p></div></li>
        </ul>
      </div>

      <div class="ateam-card">
        <h3>Our Leadership</h3>
        <div class="tmember"><div class="tavatar">ğŸ‘¨â€âš•ï¸</div><div><strong>Dr. Amir Khan</strong><p>CEO & Co-Founder Â· Ex-WHO Health Tech Advisor</p></div></div>
        <div class="tmember"><div class="tavatar">ğŸ‘©â€ğŸ’»</div><div><strong>Priya Sharma</strong><p>CTO Â· AI/ML Lead Â· Former Google Health</p></div></div>
        <div class="tmember"><div class="tavatar">ğŸ‘¨â€ğŸ’¼</div><div><strong>James O'Brien</strong><p>COO Â· 15yr Healthcare Operations</p></div></div>
      </div>
    </div>
  </div>

  <div class="mission-sec">
    <h2>Our Mission</h2>
    <blockquote>"To make intelligent, safe, and accessible pharmacy management available to every healthcare provider on the planet â€” regardless of size, budget, or technical expertise."</blockquote>
    <button class="btn-primary" onclick="goTo('dashboard')">Explore the Platform â†’</button>
  </div>

  <footer class="footer">
    <div class="footer-inner">
      <div class="nav-logo" style="color:white"><div class="nav-logo-icon">âš•</div>Pharmly</div>
      <nav class="footer-links">
        <a onclick="goTo('home')">Home</a><a onclick="goTo('about')">About</a><a onclick="goTo('dashboard')">User Dashboard</a><a onclick="goTo('admin')">Admin Panel</a>
      </nav>
      <div class="footer-meta"><span class="dot dot-green"></span>All Systems Operational</div>
    </div>
  </footer>
</div>


<!-- ========================================================= -->
<!-- AI + USER DASHBOARD PAGE -->
<!-- ========================================================= -->

<div id="page-dashboard" class="page">

  <div class="dash-layout">

    <!-- ================= LEFT: AI PANEL ================= -->
    <aside class="ai-panel" aria-label="AI Pharmacy Assistant">

      <!-- Header -->
      <div class="ai-ph">
        <div class="ai-ph-top">
          <div>
            <h2>ğŸ¤– AI Pharmacy Assistant</h2>
            <div class="ai-status-row">
              <span class="dot dot-green"></span>Operational
              <span class="sep">|</span>
              <span class="dot dot-green"></span>Compliance Active
              <span class="sep">|</span>
              <span class="dot dot-green"></span>Rx Engine Live
            </div>
          </div>
          <button class="webcall-btn" onclick="startWebCall()" aria-label="Start Web Voice Call">
            ğŸ“
          </button>
        </div>
      </div>

      <!-- Messages -->
      <div class="ai-msgs" id="aiMsgs" aria-live="polite"></div>

      <!-- Input -->
      <div class="ai-input-area">

        <div class="rx-banner" id="rxBanner" role="alert">
          <span class="ri">âš ï¸</span>
          <div>
            <strong>Prescription Required</strong>
            <small>This medicine needs a valid prescription.</small>
          </div>
          <button class="rx-upload-btn" onclick="openModal('rxModal')">
            ğŸ“„ Upload
          </button>
        </div>

        <div class="ai-input-row">
          <input 
            type="text"
            class="ai-ti"
            id="aiInput"
            placeholder="Order meds, find generics, check interactions..."
          >
          <button class="ai-send" onclick="sendAiMessage()" aria-label="Send">
            Send
          </button>
        </div>

      </div>

    </aside>


    <!-- ================= RIGHT: USER DASHBOARD ================= -->
    <div class="admin-r">

      <!-- Header -->
      <div class="dash-header">
        <div>
          <h1>User Dashboard</h1>
          <p>Your prescriptions, orders & health summary</p>
        </div>
        <div class="user-greeting-badge">
          ğŸŸ¢ Welcome, Clerk
        </div>
      </div>

      <!-- Metrics -->
      <div class="metrics">

        <div class="mcard">
          <div class="micon ord">ğŸ’Š</div>
          <div>
            <div class="mval">0</div>
            <div class="mlbl">My Orders</div>
          </div>
        </div>

        <div class="mcard">
          <div class="micon al">ğŸ“„</div>
          <div>
            <div class="mval">0</div>
            <div class="mlbl">Prescriptions</div>
          </div>
        </div>

        <div class="mcard">
          <div class="micon rev">â‚¹</div>
          <div>
            <div class="mval">â‚¹0</div>
            <div class="mlbl">Total Spent</div>
          </div>
        </div>

        <div class="mcard">
          <div class="micon bl">âš ï¸</div>
          <div>
            <div class="mval">0</div>
            <div class="mlbl">Alerts</div>
          </div>
        </div>

      </div>

      <!-- Orders Table -->
      <div class="tcard">
        <div class="tcard-head">
          <h3>Recent Orders</h3>
        </div>
        <div class="tbl-wrap">
          <table class="tbl">
            <thead>
              <tr>
                <th>Medicine</th>
                <th>Status</th>
                <th>Date</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody id="ordersTable">
              <tr>
                <td colspan="4">No orders yet</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
    <!-- END RIGHT PANEL -->

  </div>
  <!-- END dash-layout -->

</div>
<!-- END page-dashboard -->

<!-- ========================================================= -->
<!-- ADMIN PAGE -->
<!-- ========================================================= -->
div id="page-admin" class="page">
  <div class="admin-layout">

    <!-- SIDEBAR -->
    <aside class="admin-sidebar" aria-label="Admin Navigation">
      <button class="sb-btn active" onclick="showAdminSec('overview',this)" aria-pressed="true"><span>ğŸ“Š</span>Overview</button>
      <button class="sb-btn" onclick="showAdminSec('orders',this)" aria-pressed="false"><span>ğŸ“¦</span>Orders</button>
      <button class="sb-btn" onclick="showAdminSec('customers',this)" aria-pressed="false"><span>ğŸ‘¥</span>Customers</button>
      <button class="sb-btn" onclick="showAdminSec('inventory',this)" aria-pressed="false"><span>ğŸ’Š</span>Inventory</button>
      <button class="sb-btn" onclick="showAdminSec('analytics',this)" aria-pressed="false"><span>ğŸ“ˆ</span>Analytics</button>
      <button class="sb-btn" onclick="showAdminSec('payments',this)" aria-pressed="false"><span>ğŸ’³</span>Payments</button>
      <div class="sb-div"></div>
      <div class="sb-qs">
        <div class="sq-title">Quick Stats</div>
        <div class="sq-item"><span>ğŸ’°</span><div><strong>$48,200</strong><small>Revenue</small></div></div>
        <div class="sq-item"><span>ğŸ“¦</span><div><strong>1,023</strong><small>Orders</small></div></div>
        <div class="sq-item"><span>ğŸ‘¥</span><div><strong>342</strong><small>Customers</small></div></div>
      </div>
    </aside>

    <!-- MAIN -->
    <div class="admin-main">

      <!-- OVERVIEW -->
      <section id="asec-overview" class="asec show" aria-labelledby="asec-ov-title">
        <div class="asec-title-row"><div><h1 id="asec-ov-title">Sales Overview</h1><p class="asec-sub">Let's check your pharmacy today</p></div></div>
        <div class="ov-metrics">
          <div class="mcard"><div class="micon rev">ğŸ’°</div><div><div class="mval">$112,200</div><div class="mlbl">Total Revenue</div><div class="mch pos">â–² 2% last week</div></div></div>
          <div class="mcard"><div class="micon ord">ğŸ“Š</div><div><div class="mval">$12,500</div><div class="mlbl">Total Profit</div><div class="mch pos">â–² 8% last week</div></div></div>
          <div class="mcard"><div class="micon al">ğŸ’¸</div><div><div class="mval">$48,200</div><div class="mlbl">Total Cost</div><div class="mch neg">â–¼ 0.2% last week</div></div></div>
          <div class="mcard"><div class="micon bl">ğŸ›’</div><div><div class="mval">$96.50</div><div class="mlbl">Avg. Order Value</div><div class="mch pos">â–² 5% last week</div></div></div>
        </div>
        <div class="ov-charts">
          <div class="chart-card"><div class="cc-head"><h3>Total Revenue</h3><span class="badge badge-blue">This Month</span></div><div style="height:240px"><canvas id="ovRevChart"></canvas></div></div>
          <div class="chart-card"><div class="cc-head"><h3>Orders By Time</h3></div><div style="height:240px"><canvas id="ovOrdChart"></canvas></div></div>
        </div>
        <div class="ov-bottom">
          <div class="tcard">
            <div class="tcard-head"><h3>Recent Orders</h3><button onclick="showAdminSec('orders',document.querySelector('.sb-btn:nth-child(2)'))" class="feat-link" style="background:none;font-size:.82rem;cursor:pointer">View All â†’</button></div>
            <div style="overflow-x:auto"><table class="tbl" aria-label="Recent orders"><thead><tr><th>Order ID</th><th>Medicine</th><th>Price</th><th>Status</th><th>Payment</th><th>Action</th></tr></thead><tbody id="ovOrdersBody"></tbody></table></div>
          </div>
          <div class="card" style="padding:1.1rem">
            <h3 style="font-size:.9rem;margin-bottom:.875rem;color:var(--b1)">ğŸ† Top Products</h3>
            <div id="ovTopProds"></div>
          </div>
        </div>
      </section>

      <!-- ORDERS -->
      <section id="asec-orders" class="asec" aria-labelledby="asec-ord-title">
        <div class="asec-title-row"><div><h1 id="asec-ord-title">Orders Management</h1><p class="asec-sub">View, manage and add orders</p></div><button class="btn-primary btn-sm" onclick="openModal('addOrderModal')">â• Add Order</button></div>
        <div class="filter-row"><input type="search" class="form-input" id="ordSearch" placeholder="Search orders..." style="max-width:280px" oninput="filterOrders()" aria-label="Search orders"><select class="form-input" style="width:140px" onchange="filterOrders()" id="ordStatusFilter" aria-label="Filter by status"><option value="">All Status</option><option>Completed</option><option>In Progress</option><option>Pending</option></select></div>
        <div class="tbl-wrap"><table class="tbl" aria-label="Orders"><thead><tr><th>Order ID</th><th>Customer</th><th>Medicine</th><th>Price</th><th>Status</th><th>Payment Method</th><th>Payment Status</th><th>Actions</th></tr></thead><tbody id="ordersBody"></tbody></table></div>
      </section>

      <!-- CUSTOMERS -->
      <section id="asec-customers" class="asec" aria-labelledby="asec-cust-title">
        <div class="asec-title-row"><div><h1 id="asec-cust-title">Customer Management</h1><p class="asec-sub">View and manage all customers</p></div><button class="btn-primary btn-sm" onclick="openModal('addCustModal')">â• Add Customer</button></div>
        <div class="filter-row"><input type="search" class="form-input" id="custSearch" placeholder="Search customers..." style="max-width:280px" oninput="filterCustomers()" aria-label="Search customers"></div>
        <div class="tbl-wrap"><table class="tbl" aria-label="Customers"><thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Orders</th><th>Status</th><th>Actions</th></tr></thead><tbody id="custBody"></tbody></table></div>
      </section>

      <!-- INVENTORY -->
      <section id="asec-inventory" class="asec" aria-labelledby="asec-inv-title">
        <div class="asec-title-row"><div><h1 id="asec-inv-title">Inventory Management</h1><p class="asec-sub">Track stock levels and manage medicines</p></div><button class="btn-primary btn-sm" onclick="openModal('addMedModal')">â• Add Medicine</button></div>
        <div class="inv-alerts" id="invAlerts" aria-live="polite"></div>
        <div class="tbl-wrap"><table class="tbl" aria-label="Inventory"><thead><tr><th>Medicine</th><th>Category</th><th>Stock</th><th>Status</th><th>Price</th><th>Rx Required</th><th>Actions</th></tr></thead><tbody id="invBody"></tbody></table></div>
      </section>

      <!-- PAYMENTS -->
      <section id="asec-payments" class="asec" aria-labelledby="asec-pay-title">
        <div class="asec-title-row"><div><h1 id="asec-pay-title">Payment Center</h1><p class="asec-sub">Manage transactions and process payments securely</p></div><button class="btn-primary btn-sm" onclick="openModal('payModal')">ğŸ’³ New Payment</button></div>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:.875rem">
          <div class="mcard"><div class="micon rev">ğŸ’°</div><div><div class="mval">â‚¬42,180</div><div class="mlbl">Total Collected</div><div class="mch pos">â–² 6% this month</div></div></div>
          <div class="mcard"><div class="micon ord">ğŸ’³</div><div><div class="mval">28</div><div class="mlbl">Pending Payments</div><div class="mch neg">â–¼ Needs attention</div></div></div>
          <div class="mcard"><div class="micon al">ğŸ”„</div><div><div class="mval">â‚¬1,240</div><div class="mlbl">Refunds Issued</div><div class="mch neu">This month</div></div></div>
          <div class="mcard"><div class="micon bl">âœ…</div><div><div class="mval">98.2%</div><div class="mlbl">Success Rate</div><div class="mch pos">â–² Great</div></div></div>
        </div>
        <div class="tbl-wrap"><table class="tbl" aria-label="Payments"><thead><tr><th>Order ID</th><th>Patient</th><th>Amount</th><th>Method</th><th>Status</th><th>Date</th><th>Action</th></tr></thead><tbody id="payBody"></tbody></table></div>
      </section>

      <!-- ANALYTICS -->
      <section id="asec-analytics" class="asec" aria-labelledby="asec-an-title">
        <div class="asec-title-row"><h1 id="asec-an-title">Analytics & Reports</h1></div>
        <div class="an-grid">
          <div class="chart-card"><div class="cc-head"><h3>Weekly Revenue Trend</h3></div><div style="height:240px"><canvas id="anRevChart"></canvas></div></div>
          <div class="chart-card"><div class="cc-head"><h3>Medicine Categories</h3></div><div style="height:240px"><canvas id="anCatChart"></canvas></div></div>
          <div class="chart-card"><div class="cc-head"><h3>Top 5 by Volume</h3></div><div style="height:240px"><canvas id="anTopChart"></canvas></div></div>
          <div class="chart-card"><div class="cc-head"><h3>Monthly Orders</h3></div><div style="height:240px"><canvas id="anMonChart"></canvas></div></div>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- ============================================================
     SAFETY & SECURITY PAGE
============================================================ -->
<div id="page-safety" class="page" style="background:var(--g6)">
  <div class="ep-wrap" style="max-width:1100px">
    <div style="display:flex;align-items:center;gap:1rem;margin-bottom:.5rem">
      <div style="width:52px;height:52px;background:linear-gradient(135deg,var(--b1),var(--b3));border-radius:var(--r3);display:flex;align-items:center;justify-content:center;font-size:1.6rem;flex-shrink:0">ğŸ›¡ï¸</div>
      <div><h1 style="margin:0">Safety & Security</h1><p style="color:var(--g3);margin:.2rem 0 0;font-size:.95rem">Prescription enforcement, compliance engine, data protection & live monitoring</p></div>
    </div>

    <!-- Live Status Bar -->
    <div class="ss-status-bar">
      <div class="ss-status-item"><span class="dot dot-green"></span>Compliance Engine: <strong>Active</strong></div>
      <div class="ss-status-item"><span class="dot dot-green"></span>Rx Enforcement: <strong>Live</strong></div>
      <div class="ss-status-item"><span class="dot dot-green"></span>Data Encryption: <strong>AES-256</strong></div>
      <div class="ss-status-item"><span class="dot dot-green"></span>Uptime: <strong>99.9%</strong></div>
      <div class="ss-status-item"><span class="dot dot-orange"></span>Rx Blocks Today: <strong>12</strong></div>
    </div>

    <div class="ss-grid">
      <!-- LEFT COLUMN -->
      <div style="display:flex;flex-direction:column;gap:1.25rem">

        <!-- Prescription Enforcement -->
        <div class="ep-sec">
          <div class="ep-sec-h">ğŸ“‹ Prescription Enforcement</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <p style="font-size:.88rem;color:var(--g3);line-height:1.7">Every order for a restricted medicine is checked in real-time against uploaded prescriptions. The compliance engine blocks dispensing if no valid Rx is found â€” automatically, before the order reaches the pharmacy.</p>
            <div class="ss-feature-list">
              <div class="ss-feat"><span>ğŸ”’</span><div><strong>Auto-Block on Missing Rx</strong><p>Orders for Schedule H/H1 drugs are blocked instantly without a verified prescription.</p></div></div>
              <div class="ss-feat"><span>ğŸ“¤</span><div><strong>Real-Time Upload & Verify</strong><p>Patients upload prescriptions via the AI chat or dashboard. Verification happens in seconds.</p></div></div>
              <div class="ss-feat"><span>ğŸ“…</span><div><strong>Expiry Tracking</strong><p>Prescriptions are tracked for validity. Expired Rx cannot be used to place restricted orders.</p></div></div>
            </div>
            <div class="ss-live-block">
              <div class="ss-live-head"><span class="dot dot-green"></span>Live Rx Status</div>
              <div class="ss-rx-row"><span>âœ…</span> Amoxicillin 500mg â€” Rx Verified (PAT001) <span class="badge badge-green">Active</span></div>
              <div class="ss-rx-row"><span>â³</span> Tramadol 50mg â€” Rx Pending (PAT002) <span class="badge badge-orange">Review</span></div>
              <div class="ss-rx-row"><span>ğŸš«</span> Oxycodone 10mg â€” Rx Blocked (PAT003) <span class="badge badge-red">Blocked</span></div>
            </div>
          </div>
        </div>

        <!-- Drug Interaction Safety -->
        <div class="ep-sec">
          <div class="ep-sec-h">âš ï¸ Drug Interaction Safety Engine</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <p style="font-size:.88rem;color:var(--g3);line-height:1.7">The AI checks every new medication added against the patient's current medicines and flags dangerous combinations before the order is placed.</p>
            <div class="ss-feature-list">
              <div class="ss-feat"><span>ğŸ§¬</span><div><strong>Real-Time Interaction Check</strong><p>Checks new medicines against patient's active medications instantly.</p></div></div>
              <div class="ss-feat"><span>ğŸš¨</span><div><strong>3-Level Alert System</strong><p>Safe âœ… Â· Warning âš ï¸ Â· Dangerous ğŸš¨ â€” clear severity levels for every interaction.</p></div></div>
              <div class="ss-feat"><span>ğŸ“Š</span><div><strong>12,000+ Drug Pairs Monitored</strong><p>Comprehensive interaction database updated monthly from clinical sources.</p></div></div>
            </div>
          </div>
        </div>

        <!-- Generic Substitutes -->
        <div class="ep-sec">
          <div class="ep-sec-h">ğŸ’° Generic Substitute Finder</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <p style="font-size:.88rem;color:var(--g3);line-height:1.7">Automatically suggests FDA-equivalent generic alternatives for brand-name drugs, helping patients save up to 80% without sacrificing efficacy.</p>
            <div class="ss-feature-list">
              <div class="ss-feat"><span>ğŸ’Š</span><div><strong>Same Active Ingredient</strong><p>Generics have the same active ingredient, dosage, and route as the brand.</p></div></div>
              <div class="ss-feat"><span>ğŸ’¸</span><div><strong>Average 60â€“80% Cost Savings</strong><p>Most patients save significantly by switching to verified generics.</p></div></div>
            </div>
            <div class="ss-live-block">
              <div class="ss-live-head">Example Substitutions</div>
              <div class="ss-rx-row">Lipitor (Atorvastatin) â†’ <strong>Generic Atorvastatin</strong> â€” Save 74%</div>
              <div class="ss-rx-row">Nexium (Esomeprazole) â†’ <strong>Generic Esomeprazole</strong> â€” Save 68%</div>
              <div class="ss-rx-row">Ventolin (Salbutamol) â†’ <strong>Generic Salbutamol</strong> â€” Save 55%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div style="display:flex;flex-direction:column;gap:1.25rem">

        <!-- Data Security -->
        <div class="ep-sec">
          <div class="ep-sec-h">ğŸ” Data Security & Privacy</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <div class="ss-feature-list">
              <div class="ss-feat"><span>ğŸ”’</span><div><strong>AES-256 Encryption</strong><p>All patient data, prescriptions, and health records encrypted at rest and in transit.</p></div></div>
              <div class="ss-feat"><span>ğŸ¥</span><div><strong>HIPAA Compliant</strong><p>Full HIPAA & GDPR compliance. Zero data sold to third parties.</p></div></div>
              <div class="ss-feat"><span>ğŸ›¡ï¸</span><div><strong>JWT Auth + Role-Based Access</strong><p>Admins and patients have separate access scopes. Tokens expire in 24h.</p></div></div>
              <div class="ss-feat"><span>ğŸ“‹</span><div><strong>Full Audit Logs</strong><p>Every action â€” order, Rx upload, stock update â€” is logged with timestamp and user ID.</p></div></div>
            </div>
          </div>
        </div>

        <!-- Observability -->
        <div class="ep-sec">
          <div class="ep-sec-h">ğŸ”— Observability & Monitoring</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <div class="ss-obs-grid">
              <div class="ss-obs-item"><div class="ss-obs-val">99.9%</div><div class="ss-obs-lbl">Uptime (30d)</div></div>
              <div class="ss-obs-item"><div class="ss-obs-val">48ms</div><div class="ss-obs-lbl">Avg Response</div></div>
              <div class="ss-obs-item"><div class="ss-obs-val">0</div><div class="ss-obs-lbl">Critical Errors</div></div>
              <div class="ss-obs-item"><div class="ss-obs-val">12</div><div class="ss-obs-lbl">Rx Blocks Today</div></div>
            </div>
            <div class="ss-feature-list" style="margin-top:.25rem">
              <div class="ss-feat"><span>ğŸ“¡</span><div><strong>Webhook Alerts</strong><p>Real-time webhook events for Rx blocks, low stock, and anomalous orders.</p></div></div>
              <div class="ss-feat"><span>ğŸ”</span><div><strong>Agent Trace Logs</strong><p>Full traceability of every AI decision â€” extractor â†’ controller â†’ responder pipeline.</p></div></div>
            </div>
            <div class="ss-live-block">
              <div class="ss-live-head"><span class="dot dot-green"></span>Live Event Stream</div>
              <div class="ss-rx-row" id="ssEvent1">ğŸ›¡ï¸ Rx blocked for Tramadol â€” PAT002 Â· 2 min ago</div>
              <div class="ss-rx-row" id="ssEvent2">ğŸ“¦ Order #1024 placed â€” Paracetamol Â· 5 min ago</div>
              <div class="ss-rx-row" id="ssEvent3">âš ï¸ Low stock alert â€” Amoxicillin (8 left) Â· 9 min ago</div>
            </div>
          </div>
        </div>

        <!-- Medication Adherence -->
        <div class="ep-sec">
          <div class="ep-sec-h">ğŸ“… Medication Adherence & Health Profile</div>
          <div style="padding:1.25rem;display:flex;flex-direction:column;gap:.875rem">
            <p style="font-size:.88rem;color:var(--g3);line-height:1.7">Each patient has a personalized health profile with a medication calendar, adherence tracking, and family profile management for caregivers.</p>
            <div class="ss-feature-list">
              <div class="ss-feat"><span>ğŸ“†</span><div><strong>Medication Calendar</strong><p>Visual calendar showing when each medication should be taken â€” morning, noon, night.</p></div></div>
              <div class="ss-feat"><span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</span><div><strong>Family Profiles</strong><p>Caregivers can manage prescriptions for children, elderly, or dependents from one account.</p></div></div>
              <div class="ss-feat"><span>ğŸ“ˆ</span><div><strong>Adherence Rate Tracking</strong><p>See compliance rate over time. Missed doses trigger gentle refill reminders.</p></div></div>
            </div>
            <div style="text-align:center;margin-top:.25rem">
              <button class="btn-primary btn-sm" onclick="goTo('dashboard')" style="justify-content:center">View My Health Profile â†’</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     SUPPORT CHATBOT (global) â€” bottom-RIGHT
============================================================ -->
<div class="support-wrap" aria-label="Support Chat">
  <button class="chat-toggle-btn" onclick="toggleChat()" aria-label="Toggle Support Chat" aria-expanded="false" id="chatToggleBtn">ğŸ’¬</button>
  <div class="chat-panel" id="chatPanel" role="dialog" aria-label="AI Health Assistant">
    <div class="chat-ph">
      <div><strong>ğŸ¤ AI Health Assistant</strong><p>Support Â· Symptoms Â· Drug Safety Â· 24/7</p></div>
      <button class="chat-ph-close" onclick="toggleChat()" aria-label="Close">âœ•</button>
    </div>

    <!-- Mode tabs -->
    <div class="chat-tabs">
      <button class="chat-tab active" id="tab-support" onclick="switchChatTab('support')">ğŸ’¬ Support</button>
      <button class="chat-tab" id="tab-symptom" onclick="switchChatTab('symptom')">ğŸ©º Symptoms</button>
      <button class="chat-tab" id="tab-drug" onclick="switchChatTab('drug')">âš ï¸ Drug Check</button>
    </div>

    <!-- TAB 1: Support Chat -->
    <div class="chat-mode active" id="chatMode-support">
      <div class="chat-msgs" id="chatMsgs" aria-live="polite"></div>
      <div class="chat-input-row">
        <input type="text" class="chat-ti" id="chatTi" placeholder="Describe your issue..." aria-label="Type your message" onkeydown="if(event.key==='Enter')sendChatMsg()">
        <button class="chat-send" onclick="sendChatMsg()" aria-label="Send">Send</button>
      </div>
    </div>

    <!-- TAB 2: Symptom Checker -->
    <div class="chat-mode" id="chatMode-symptom">
      <div class="symptom-panel">
        <div class="sym-section-title">Select your symptom</div>
        <div class="sym-grid" id="symGrid">
          <button class="sym-btn" onclick="selectSymptom('headache')">ğŸ¤• Headache</button>
          <button class="sym-btn" onclick="selectSymptom('backpain')">ğŸ¦´ Back Pain</button>
          <button class="sym-btn" onclick="selectSymptom('fever')">ğŸŒ¡ï¸ Fever</button>
          <button class="sym-btn" onclick="selectSymptom('cold')">ğŸ¤§ Cold & Flu</button>
          <button class="sym-btn" onclick="selectSymptom('allergy')">ğŸŒ¿ Allergies</button>
          <button class="sym-btn" onclick="selectSymptom('stomach')">ğŸ¤¢ Stomach Pain</button>
          <button class="sym-btn" onclick="selectSymptom('throat')">ğŸ˜® Sore Throat</button>
          <button class="sym-btn" onclick="selectSymptom('muscle')">ğŸ’ª Muscle Pain</button>
          <button class="sym-btn" onclick="selectSymptom('insomnia')">ğŸ˜´ Insomnia</button>
          <button class="sym-btn" onclick="selectSymptom('acidity')">ğŸ”¥ Acidity</button>
        </div>
        <div class="sym-result" id="symResult">
          <h4 id="symResultTitle">ğŸ’Š Recommended Medicines</h4>
          <div id="symMedList"></div>
          <div class="sym-disclaimer">âš ï¸ General OTC suggestions only. Consult a pharmacist or doctor before use.</div>
          <button class="sym-reset-btn" onclick="resetSymptom()">â† Check Another Symptom</button>
        </div>
      </div>
    </div>

    <!-- TAB 3: Drug Interaction Checker -->
    <div class="chat-mode" id="chatMode-drug">
      <div class="drug-panel">
        <div class="sym-section-title">Enter medicines to check interactions</div>
        <div class="drug-inputs">
          <input type="text" id="drugInput1" class="drug-input" placeholder="Medicine 1 (e.g. Aspirin)">
          <input type="text" id="drugInput2" class="drug-input" placeholder="Medicine 2 (e.g. Ibuprofen)">
          <input type="text" id="drugInput3" class="drug-input" placeholder="Medicine 3 (optional)">
          <button class="drug-check-btn" onclick="checkDrugInteraction()">ğŸ” Check Interactions</button>
        </div>
        <div class="drug-result" id="drugResult"></div>
        <div class="drug-examples">
          <strong>Try:</strong> Aspirin + Ibuprofen Â· Warfarin + Aspirin Â· Paracetamol + Alcohol Â· Metformin + Alcohol
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     TOAST CONTAINER
============================================================ -->
<div class="toast-wrap" id="toastWrap" aria-live="polite" aria-atomic="true"></div>

<!-- ============================================================
     MODALS
============================================================ -->
<!-- LOGIN -->
<div class="overlay" id="loginModal" role="dialog" aria-modal="true" aria-labelledby="loginTitle" onclick="overlayClose(event,'loginModal')">
  <div class="modal-box">
    <h2 class="modal-title" id="loginTitle">Welcome Back</h2>
    <p class="modal-sub">Login to your Pharmly account</p>
    <div style="display:flex;flex-direction:column;gap:.875rem">
      <div class="form-group"><label class="form-label" for="liEmail">Email Address</label><input class="form-input" type="email" id="liEmail" placeholder="you@pharmacy.com"></div>
      <div class="form-group"><label class="form-label" for="liPass">Password</label><input class="form-input" type="password" id="liPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <button class="btn-primary" onclick="handleLogin()" style="justify-content:center;margin-top:.25rem">Login</button>
      <button onclick="closeModal('loginModal')" style="background:none;color:var(--g3);font-size:.875rem;padding:8px">Cancel</button>
    </div>
  </div>
</div>

<!-- WEB CALL -->
<div class="overlay" id="callModal" role="dialog" aria-modal="true" onclick="overlayClose(event,'callModal')">
  <div class="modal-box" style="text-align:center">
    <div style="font-size:3rem;margin-bottom:.875rem;animation:orbFloat 2s ease-in-out infinite">ğŸ“</div>
    <h2 class="modal-title">Web Voice Call</h2>
    <p class="modal-sub">AI Voice Agent is active. Speak your request clearly.</p>
    <div style="display:flex;align-items:center;justify-content:center;gap:7px;font-size:.82rem;font-weight:600;color:var(--g3);margin-bottom:1.5rem"><span class="dot dot-green"></span>Listening...</div>
    <button class="btn-primary" onclick="closeModal('callModal')" style="background:linear-gradient(135deg,#ef4444,#dc2626);justify-content:center">ğŸ“µ End Call</button>
  </div>
</div>

<!-- RX UPLOAD â€” FUNCTIONAL -->
<div class="overlay" id="rxModal" role="dialog" aria-modal="true" aria-labelledby="rxTitle" onclick="overlayClose(event,'rxModal')">
  <div class="modal-box">
    <h2 class="modal-title" id="rxTitle">ğŸ“„ Upload Prescription</h2>
    <p class="modal-sub" id="rxModalSub">Upload a valid prescription to proceed with your restricted medication order.</p>

    <!-- Medicine requiring Rx banner -->
    <div class="rx-med-banner" id="rxMedBanner" style="display:none">
      <span>ğŸ’Š</span>
      <div><strong id="rxMedName">This medicine</strong> requires a valid prescription before ordering.</div>
    </div>

    <!-- Upload zone -->
    <div class="rx-zone" id="rxDropZone" onclick="document.getElementById('rxFileInput').click()" role="button" tabindex="0" aria-label="Click to upload prescription">
      <input type="file" id="rxFileInput" accept=".jpg,.jpeg,.png,.pdf" style="display:none" onchange="handleRxFile(this)">
      <div class="rx-zone-icon" id="rxZoneIcon">ğŸ“‹</div>
      <p id="rxZoneText"><strong>Click to upload or drag & drop</strong></p>
      <p style="font-size:.75rem;color:var(--g4);margin-top:5px">JPG, PNG or PDF Â· Max 10MB</p>
    </div>

    <!-- Progress / status -->
    <div class="rx-status" id="rxStatus" style="display:none"></div>

    <div style="display:flex;gap:.875rem;margin-top:1.4rem">
      <button class="btn-primary" id="rxVerifyBtn" onclick="simulateRxUpload()" style="flex:1;justify-content:center">ğŸ“„ Upload & Verify</button>
      <button onclick="closeModal('rxModal')" style="flex:1;padding:13px;border:2px solid var(--g5);border-radius:var(--r2);font-weight:600;color:var(--g3)">Cancel</button>
    </div>
  </div>
</div>

<!-- ADD ORDER -->
<div class="overlay" id="addOrderModal" role="dialog" aria-modal="true" onclick="overlayClose(event,'addOrderModal')">
  <div class="modal-box" style="max-width:520px">
    <h2 class="modal-title">â• Add New Order</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:.875rem">
      <div class="form-group"><label class="form-label" for="aoId">Order ID</label><input class="form-input" id="aoId" placeholder="#ORD600"></div>
      <div class="form-group"><label class="form-label" for="aoCust">Customer</label><input class="form-input" id="aoCust" placeholder="John Doe"></div>
      <div class="form-group" style="grid-column:span 2"><label class="form-label" for="aoMed">Medicine(s)</label><input class="form-input" id="aoMed" placeholder="Paracetamol (2), Ibuprofen (1)"></div>
      <div class="form-group"><label class="form-label" for="aoPrice">Price ($)</label><input class="form-input" type="number" id="aoPrice" placeholder="25.50" step="0.01"></div>
      <div class="form-group"><label class="form-label" for="aoStatus">Status</label><select class="form-input" id="aoStatus"><option>Pending</option><option>In Progress</option><option>Completed</option></select></div>
    </div>
    <div style="display:flex;gap:.875rem;margin-top:1.4rem">
      <button class="btn-primary" onclick="addOrder()" style="flex:1;justify-content:center">âœ… Add Order</button>
      <button onclick="closeModal('addOrderModal')" style="flex:1;padding:13px;border:2px solid var(--g5);border-radius:var(--r2);font-weight:600;color:var(--g3)">Cancel</button>
    </div>
  </div>
</div>

<!-- ADD CUSTOMER -->
<div class="overlay" id="addCustModal" role="dialog" aria-modal="true" onclick="overlayClose(event,'addCustModal')">
  <div class="modal-box" style="max-width:520px">
    <h2 class="modal-title">â• Add New Customer</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:.875rem">
      <div class="form-group"><label class="form-label" for="acName">Full Name</label><input class="form-input" id="acName" placeholder="John Doe"></div>
      <div class="form-group"><label class="form-label" for="acEmail">Email</label><input class="form-input" type="email" id="acEmail" placeholder="john@email.com"></div>
      <div class="form-group"><label class="form-label" for="acPhone">Phone</label><input class="form-input" id="acPhone" placeholder="+1-555-0100"></div>
      <div class="form-group"><label class="form-label" for="acCity">City</label><input class="form-input" id="acCity" placeholder="New York"></div>
    </div>
    <div style="display:flex;gap:.875rem;margin-top:1.4rem">
      <button class="btn-primary" onclick="addCustomer()" style="flex:1;justify-content:center">âœ… Add Customer</button>
      <button onclick="closeModal('addCustModal')" style="flex:1;padding:13px;border:2px solid var(--g5);border-radius:var(--r2);font-weight:600;color:var(--g3)">Cancel</button>
    </div>
  </div>
</div>

<!-- ADD MEDICINE -->
<div class="overlay" id="addMedModal" role="dialog" aria-modal="true" onclick="overlayClose(event,'addMedModal')">
  <div class="modal-box" style="max-width:520px">
    <h2 class="modal-title">â• Add Medicine</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:.875rem">
      <div class="form-group" style="grid-column:span 2"><label class="form-label" for="amName">Medicine Name</label><input class="form-input" id="amName" placeholder="Paracetamol 650mg"></div>
      <div class="form-group"><label class="form-label" for="amCat">Category</label><select class="form-input" id="amCat"><option>Pain Relief</option><option>Antibiotic</option><option>Antihistamine</option><option>Diabetes</option><option>Blood Pressure</option><option>Gastric</option><option>Other</option></select></div>
      <div class="form-group"><label class="form-label" for="amStock">Initial Stock</label><input class="form-input" type="number" id="amStock" placeholder="50"></div>
      <div class="form-group"><label class="form-label" for="amPrice">Price ($)</label><input class="form-input" type="number" id="amPrice" placeholder="2.50" step="0.01"></div>
      <div class="form-group"><label class="form-label" for="amReorder">Reorder Level</label><input class="form-input" type="number" id="amReorder" placeholder="10"></div>
      <div class="form-group" style="grid-column:span 2;flex-direction:row;align-items:center;gap:8px"><input type="checkbox" id="amRx" style="width:15px;height:15px;accent-color:var(--b2)"><label class="form-label" for="amRx" style="margin:0;cursor:pointer">Requires Prescription (Rx)</label></div>
    </div>
    <div style="display:flex;gap:.875rem;margin-top:1.4rem">
      <button class="btn-primary" onclick="addMedicine()" style="flex:1;justify-content:center">âœ… Add Medicine</button>
      <button onclick="closeModal('addMedModal')" style="flex:1;padding:13px;border:2px solid var(--g5);border-radius:var(--r2);font-weight:600;color:var(--g3)">Cancel</button>
    </div>
  </div>
</div>

<!-- SAFETY & MAINTENANCE MODAL -->
<div class="overlay" id="safetyModal" role="dialog" aria-modal="true" aria-labelledby="safetyTitle" onclick="overlayClose(event,'safetyModal')">
  <div class="modal-box" style="max-width:600px;max-height:85vh;overflow-y:auto">
    <h2 class="modal-title" id="safetyTitle">ğŸ›¡ï¸ Safety & Maintenance</h2>
    <p class="modal-sub">Real-time prescription enforcement, live alerts, observability and drug interaction checking.</p>

    <!-- Prescription Enforcement -->
    <div class="safety-block">
      <h3 class="safety-block-title">ğŸ“‹ Prescription Enforcement â€” Live</h3>
      <div class="safety-status-grid">
        <div class="safety-status-item"><span class="dot dot-green"></span>Rx Validation: <strong class="text-green">Active</strong></div>
        <div class="safety-status-item"><span class="dot dot-green"></span>Compliance Engine: <strong class="text-green">Running</strong></div>
        <div class="safety-status-item"><span class="dot dot-green"></span>Blocks Today: <strong id="safetyBlockCount">12</strong></div>
        <div class="safety-status-item"><span class="dot dot-orange"></span>Refills Pending: <strong class="text-orange">3</strong></div>
      </div>
    </div>

    <!-- Live Refill Suggestions -->
    <div class="safety-block safety-block-warn">
      <h3 class="safety-block-title" style="color:#92400e">ğŸ”„ Live Refill Suggestions</h3>
      <div id="refillSuggestions" style="display:flex;flex-direction:column;gap:6px;font-size:.8rem">
        <div class="refill-item">ğŸ’Š <strong>Amoxicillin 500mg</strong> â€” 3 patients due for refill <span class="badge badge-orange">Urgent</span></div>
        <div class="refill-item">ğŸ’Š <strong>Metformin 850mg</strong> â€” 1 patient due for refill <span class="badge badge-blue">Scheduled</span></div>
        <div class="refill-item">ğŸ’Š <strong>Lisinopril 10mg</strong> â€” 2 patients due for refill <span class="badge badge-orange">Urgent</span></div>
      </div>
    </div>

    <!-- Observability -->
    <div class="safety-block">
      <h3 class="safety-block-title">ğŸ”— Observability & Monitoring</h3>
      <div style="display:flex;flex-direction:column;gap:0">
        <div class="obs-row"><span>Agent Trace Logs</span><a href="#" onclick="return false" style="color:var(--b2);font-weight:700;font-size:.75rem">View Traces â†’</a></div>
        <div class="obs-row"><span>Webhook Events</span><span class="badge badge-green" style="font-size:.7rem">â— Live</span></div>
        <div class="obs-row"><span>Admin Alert Stream</span><span id="webhookStatus" class="badge badge-green" style="font-size:.7rem">â— Connected</span></div>
        <div class="obs-row" style="border:none"><span>POST /agent-chat â†’ Backend Pipeline</span><a href="#" onclick="goTo('endpoints');closeModal('safetyModal')" style="color:var(--b2);font-weight:700;font-size:.75rem">API Docs â†’</a></div>
      </div>
    </div>

    <!-- Drug Interaction Checker -->
    <div class="safety-block">
      <h3 class="safety-block-title">âš ï¸ Drug Interaction Checker</h3>
      <p style="font-size:.78rem;color:var(--g3);margin-bottom:.75rem">Flags potential adverse reactions before dispensing.</p>
      <div style="display:flex;flex-direction:column;gap:7px">
        <input type="text" class="form-input" id="modalDrug1" placeholder="Medicine 1 (e.g. Aspirin)" style="font-size:.83rem">
        <input type="text" class="form-input" id="modalDrug2" placeholder="Medicine 2 (e.g. Warfarin)" style="font-size:.83rem">
        <button class="btn-primary btn-sm" onclick="checkModalDrugInteraction()" style="justify-content:center">ğŸ” Check Interaction</button>
      </div>
      <div id="modalDrugResult" class="drug-result" style="margin-top:.75rem"></div>
    </div>

    <button onclick="closeModal('safetyModal')" style="width:100%;padding:12px;border:2px solid var(--g5);border-radius:var(--r2);font-weight:600;color:var(--g3)">Close</button>
  </div>
</div>

<script type="module" src="./main.js"></script>
</body>
</body>
</script>
